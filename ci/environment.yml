build & push image:
    stage: setup environment
    image: docker
    when: manual
    variables:
        CONTAINER_NAME: "$CI_REGISTRY/satoshilabs/trezor/trezor-suite/base"   
    services:
        - docker:dind
    before_script:
        - docker login $CI_REGISTRY -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD
    script:
        - docker build --cache-from $CONTAINER_NAME:latest --tag $CONTAINER_NAME:$CI_COMMIT_SHA --tag $CONTAINER_NAME:latest ./ci/docker/base
        - docker push $CONTAINER_NAME:$CI_COMMIT_SHA
        - docker push $CONTAINER_NAME:latest
