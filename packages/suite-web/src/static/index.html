<!DOCTYPE html>
<html lang="en" translate="no">
    <head>
        <title>Trezor Suite</title>
        <meta name="google" content="notranslate" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="utf-8" />

        <link media="all" rel="stylesheet" href="<%= assetPrefix %>/static/fonts/fonts.css" />
        <link rel="icon" href="<%= assetPrefix %>/static/images/icons/favicon/favicon.png" />
        <link
            rel="apple-touch-icon"
            href="<%= assetPrefix %>/static/images/icons/favicon/favicon.png"
        />
        <% if(isOnionLocation) { %>
        <meta
            http-equiv="onion-location"
            content="http://suite.trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad.onion/web"
        />
        <% } %>
        <script type="text/javascript">
            if (localStorage.getItem('translation_mode') === 'true') {
                console.warn('INJECTING CROWDIN IN-CONTEXT');
                var _jipt = [];
                _jipt.push(['project', 'trezor-suite']);
                _jipt.push([
                    'escape',
                    function () {
                        localStorage.removeItem('translation_mode');
                        window.location.reload();
                    },
                ]);
                var script = document.createElement('script');
                script.setAttribute('src', '//cdn.crowdin.com/jipt/jipt.js');
                document.head.prepend(script);
            }

            function switchIcons(event) {
                var isDarkMode = event.matches;
                var icon = document.querySelector('link[rel=icon]');
                var appleIcon = document.querySelector('link[rel=apple-touch-icon]');

                if (isDarkMode) {
                    // prettier-ignore
                    icon.setAttribute(
                        'href',
                        '<%= assetPrefix %>/static/images/icons/favicon/favicon_dm.png'
                    );
                    // prettier-ignore
                    appleIcon.setAttribute(
                        'href',
                        '<%= assetPrefix %>/static/images/icons/favicon/favicon_dm.png'
                    );
                } else {
                    // prettier-ignore
                    icon.setAttribute(
                        'href',
                        '<%= assetPrefix %>/static/images/icons/favicon/favicon.png'
                    );
                    // prettier-ignore
                    appleIcon.setAttribute(
                        'href',
                        '<%= assetPrefix %>/static/images/icons/favicon/favicon.png'
                    );
                }
            }

            if (window.matchMedia) {
                var windowMatchMedia = window.matchMedia('(prefers-color-scheme: dark)');

                // not supported in IE
                if (windowMatchMedia.addEventListener) {
                    windowMatchMedia.addEventListener('change', function (e) {
                        return switchIcons(e);
                    });
                }

                switchIcons(matchMediaIndex);
            }
        </script>
        <script src="<%= assetPrefix %>/static/browser-detection/index.js"></script>
    </head>
    <body>
        <noscript>This website requires JavaScript to run.</noscript>
    </body>
</html>
